# 将json格式的数据格式化
a={"vertexSet": [[{"name": "Paul E. Pfeifer", "pos": [0, 3], "sent_id": 0, "type": "PER"}, {"name": "Pfeifer", "pos": [0, 1], "sent_id": 7, "type": "PER"}, {"type": "PER", "pos": [0, 1], "name": "Pfeifer", "sent_id": 2}, {"type": "PER", "pos": [0, 1], "name": "Pfeifer", "sent_id": 8}], [{"type": "TIME", "pos": [5, 9], "name": "October 15, 1942", "sent_id": 0}], [{"name": "American", "pos": [12, 13], "sent_id": 0, "type": "LOC"}], [{"name": "Ohio General Assembly", "pos": [7, 10], "sent_id": 1, "type": "ORG"}], [{"name": "Ohio Republican party", "pos": [15, 18], "sent_id": 1, "type": "ORG"}], [{"name": "Supreme Court of Ohio", "pos": [27, 31], "sent_id": 1, "type": "ORG"}], [{"name": "Bucyrus", "pos": [4, 5], "sent_id": 2, "type": "LOC"}, {"name": "Bucyrus", "pos": [10, 11], "sent_id": 3, "type": "LOC"}], [{"type": "TIME", "pos": [6, 7], "name": "1942", "sent_id": 2}], [{"name": "Yorkshire", "pos": [7, 8], "sent_id": 4, "type": "LOC"}], [{"type": "TIME", "pos": [16, 17], "name": "1963", "sent_id": 5}], [{"name": "Ohio State University", "pos": [18, 21], "sent_id": 5, "type": "ORG"}], [{"type": "TIME", "pos": [1, 2], "name": "1966", "sent_id": 6}], [{"name": "College of Law", "pos": [11, 14], "sent_id": 6, "type": "ORG"}], [{"name": "Crawford County", "pos": [6, 8], "sent_id": 7, "type": "LOC"}], [{"name": "Julia", "pos": [4, 5], "sent_id": 8, "type": "PER"}], [{"name": "three", "pos": [6, 7], "sent_id": 8, "type": "NUM"}], [{"name": "four", "pos": [9, 10], "sent_id": 8, "type": "NUM"}]], "labels": [{"r": "P569", "h": 0, "t": 7, "evidence": [0, 2]}, {"r": "P69", "h": 0, "t": 10, "evidence": [2, 5]}, {"r": "P69", "h": 0, "t": 12, "evidence": [2, 6]}, {"r": "P102", "h": 0, "t": 4, "evidence": [0, 1]}, {"r": "P19", "h": 0, "t": 6, "evidence": [2]}, {"r": "P27", "h": 0, "t": 2, "evidence": [0]}, {"r": "P569", "h": 0, "t": 1, "evidence": [0]}], "title": "Paul Pfeifer", "sents": [["Paul", "E.", "Pfeifer", "(", "born", "October", "15", ",", "1942", ")", "is", "an", "American", "jurist", "."], ["He", "served", "in", "both", "houses", "of", "the", "Ohio", "General", "Assembly", "as", "a", "member", "of", "the", "Ohio", "Republican", "party", "and", "was", "most", "recently", "an", "Associate", "Justice", "of", "the", "Supreme", "Court", "of", "Ohio", "."], ["Pfeifer", "was", "born", "in", "Bucyrus", "in", "1942", "."], ["He", "grew", "up", "on", "his", "family", "'s", "dairy", "farm", "near", "Bucyrus", "."], ["As", "a", "teenager", ",", "he", "raised", "purebred", "Yorkshire", "hogs", "to", "finance", "his", "college", "education", "."], ["He", "earned", "a", "bachelor", "of", "arts", "degree", "in", "economics", ",", "political", "science", ",", "and", "history", "in", "1963", "from", "Ohio", "State", "University", "."], ["In", "1966", ",", "he", "also", "earned", "a", "law", "degree", "from", "the", "College", "of", "Law", "."], ["Pfeifer", "owns", "a", "cattle", "farm", "in", "Crawford", "County", ",", "near", "his", "childhood", "home", "."], ["Pfeifer", "and", "his", "wife", "Julia", "have", "three", "children", "and", "four", "grandchildren", "."]]}


rel_id2name={"P6": "head of government", "P17": "country", "P19": "place of birth", "P20": "place of death", "P22": "father", "P25": "mother", "P26": "spouse", "P27": "country of citizenship", "P30": "continent", "P31": "instance of", "P35": "head of state", "P36": "capital", "P37": "official language", "P39": "position held", "P40": "child", "P50": "author", "P54": "member of sports team", "P57": "director", "P58": "screenwriter", "P69": "educated at", "P86": "composer", "P102": "member of political party", "P108": "employer", "P112": "founded by", "P118": "league", "P123": "publisher", "P127": "owned by", "P131": "located in the administrative territorial entity", "P136": "genre", "P137": "operator", "P140": "religion", "P150": "contains administrative territorial entity", "P155": "follows", "P156": "followed by", "P159": "headquarters location", "P161": "cast member", "P162": "producer", "P166": "award received", "P170": "creator", "P171": "parent taxon", "P172": "ethnic group", "P175": "performer", "P176": "manufacturer", "P178": "developer", "P179": "series", "P190": "sister city", "P194": "legislative body", "P205": "basin country", "P206": "located in or next to body of water", "P241": "military branch", "P264": "record label", "P272": "production company", "P276": "location", "P279": "subclass of", "P355": "subsidiary", "P361": "part of", "P364": "original language of work", "P400": "platform", "P403": "mouth of the watercourse", "P449": "original network", "P463": "member of", "P488": "chairperson", "P495": "country of origin", "P527": "has part", "P551": "residence", "P569": "date of birth", "P570": "date of death", "P571": "inception", "P576": "dissolved, abolished or demolished", "P577": "publication date", "P580": "start time", "P582": "end time", "P585": "point in time", "P607": "conflict", "P674": "characters", "P676": "lyrics by", "P706": "located on terrain feature", "P710": "participant", "P737": "influenced by", "P740": "location of formation", "P749": "parent organization", "P800": "notable work", "P807": "separated from", "P840": "narrative location", "P937": "work location", "P1001": "applies to jurisdiction", "P1056": "product or material produced", "P1198": "unemployment rate", "P1336": "territory claimed by", "P1344": "participant of", "P1365": "replaces", "P1366": "replaced by", "P1376": "capital of", "P1412": "languages spoken, written or signed", "P1441": "present in work", "P3373": "sibling"}


def format_json(a):
    # 拼接得到文档
    res = ""
    for sent in a["sents"]:
        for i in sent:
            res = res + i + " "
        res += '\n'
    print(f"处理得到的文档是：{res}")

    # 得到实体关系三元组
    labels = a["labels"]
    vertexSet = a["vertexSet"]
    triplets = []
    for label in labels:
        h = label['h']
        t = label['t']
        r = label['r']
        print(vertexSet[h][0]['name'],vertexSet[t][0]['name'],rel_id2name[r])
        triplets.append((vertexSet[h][0]['name'],vertexSet[t][0]['name'],rel_id2name[r]))
    # print(triplets)

format_json(a)